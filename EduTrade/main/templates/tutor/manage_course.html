<!-- templates/main/tutor/manage_course.html -->
{% extends 'main/base.html' %}

{% block content %}
<div class="marketplace-container" style="padding: 20px; max-width: 1200px; margin: 0 auto;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h1 style="font-size: 24px; color: #3f51b5;">My Uploaded Courses</h1>
    <a href="{% url 'upload_course' %}">
      <button style="background-color: #ff4081; color: white; padding: 8px 16px; border: none; border-radius: 4px;">
        + Upload Course
      </button>
    </a>
  </div>
<div style="
    display: grid; 
    grid-template-columns: repeat(3, 1fr); 
    gap: 20px;
">
  {% for course in courses %}
  <div style="
      border: 1px solid #e0e0e0; 
      border-radius: 8px; 
      overflow: hidden; 
      background: white;
      display: flex; 
      flex-direction: column;
      height: 350px; /* fixed card height */
  ">
    <!-- Image Section -->
    <div style="
        width: 100%; 
        height: 180px; 
        background: #f0f0f0; 
        display: flex; 
        align-items: center; 
        justify-content: center;
    ">
       <span style="font-size: 24px; color: #999;">
        📚
       </span>
    </div>

    <!-- Content Section -->
    <div style="padding: 12px; flex: 1; display: flex; flex-direction: column; justify-content: space-between;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 16px; height: 40px; overflow: hidden;">{{ course.title }}</h3>
        <p style="font-size: 14px; margin-bottom: 8px; height: 60px; overflow: hidden;">{{ course.description|truncatewords:20 }}</p>
      </div>
      <div>
        <a href="{{ course.video_link }}" target="_blank" style="color: #3f51b5; text-decoration: none;">Watch Video</a>
        <br>
        {% if course.material %}
        <a href="{{ course.material.url }}" target="_blank" style="color: green;">Download PDF</a>
        {% endif %}
        <!-- Edit and Delete buttons -->
        <div style="margin-top: 10px;">
          <a href="{% url 'edit_course' course.id %}">
            <button class="btn btn-secondary" style="margin-right: 5px;">
              ✏️ Edit
            </button>
          </a>
          <a href="{% url 'delete_course' course.id %}" onclick="return confirm('Are you sure you want to delete this course?');">
            <button class="btn btn-secondary" style="margin-right: 5px;">
              🗑️ Delete
            </button>
          </a>
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <p>No courses uploaded yet.</p>
  {% endfor %}
</div>

</div>

{% endblock %}
